{"filter":false,"title":"CustomersJsonController.php","tooltip":"/security/Models/DTClasses/CustomersJsonController.php","undoManager":{"mark":13,"position":13,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":85,"column":18},"action":"insert","lines":["if (PHP_OS === \"WINNT\") {","    error_reporting(E_ALL);","    ini_set('display_errors', 'On');","    ini_set('display_startup_errors', true);","}","$redis = new \\Redis();","$redis->connect('127.0.0.1', 6379, 2.5);"," // 2.5 sec timeout.","$rootDir = $redis->hGet($_SERVER['SERVER_NAME'].\"filePaths\", 'root');","$fullPaths = $redis->hGet($_SERVER['SERVER_NAME'].\"includePaths\", 'fullPaths');","set_include_path(get_include_path() . $fullPaths);","unset($redis);","$jsDir = $rootDir;","require_once(\"init.php\");","use cellControl\\DTClasses\\GroupsJson;","$groups_json = new GroupsJson(__FILE__);","$draw = intval($groups_json->getDraw());","$recordsTotal = intval($groups_json->getRecordsTotal());","$filteredTotal = intval($groups_json->getFilteredTotal());","$form_labels = $groups_json->getFormLabels();","$errors = $groups_json->errors;","$output = array(","    \"draw\" => $draw,","    \"recordsTotal\" => $recordsTotal,","    \"recordsFiltered\" => $filteredTotal,","    \"data\" => array()","    );","if ($recordsTotal === 0) {","}","$row_data = array();","if (empty($errors)) {","    $stmt = $groups_json->getStmt();","    $isObject = is_object($stmt);","    unset($groups_json);","    $row_data = array();","    while ($isObject && $aRow = $stmt->fetch_assoc()) {","        // Adding in site id from the missing columns.","        $site_id = $aRow['id'];","        $name = $aRow[\"name\"];","        $address = $aRow[\"address\"];","        $city = $aRow[\"city\"];","        $state = $aRow[\"state\"];","        $zip = $aRow[\"zip\"];","        $type = $aRow[\"type\"];","        if ($type == 1) {","            $site_type = 'P';","        } else {","            $site_type = 'S';","        }","        // Actions based on permissions...","        // We don't have any permissions check on this particular file at least.","        // And why are we putting this in an array?  There's no reason for it.","        $actions = \"<div class='btn-group'>","        <a class='btn btn-default btn-xs dropdown-toggle' data-toggle='dropdown'","        href='javascript:void(0);''>Actions","        <span class='caret'></span>","        </a>","        <ul class='dropdown-menu pull-right'>","        <li class='textLabels' data-headername='Edit Group'>","            <a href='ajax/site-wizard/?id={$site_id}' data-siteid='{$site_id}' data-name='{$name}'","            class='editnode activateModal modalpop'>","            <img src='{$jsDir}images/tabedit.png' class='tabicons' title='edit Icons'/>","            Edit Group","        </a>","        </li>","        </ul>","        </div>\";","        $row_data[] = [","            'name' => \"<span data-id='$site_id' data-change='name' data-original='$name'>$name</span>\",","            'address' => \"<span data-id='$site_id' data-change='address' data-original='$address'>$address</span>\",","            'city' => \"<span data-id='$site_id' data-original='$city' data-change='city'>$city</span>\",","            'state' => \"<span data-id='$site_id' data-original='$state' data-change='state'>$state</span>\",","            'zip' => \"<span data-id='$site_id' data-original='$zip' data-change='zip'>$zip</span>\",","            'type' => $site_type,","            'actions' => $actions","        ];","    }","}","if (empty($errors)) {","    $output['data'] = $row_data;","}","if (!empty($errors)) {","    $output['error'] = $errors;","}","$json_output = json_encode($output);","echo $json_output;"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":["if (PHP_OS === \"WINNT\") {","    error_reporting(E_ALL);","    ini_set('display_errors', 'On');","    ini_set('display_startup_errors', true);","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":[" // 2.5 sec timeout.",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":12,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":11,"column":0},"end":{"row":11,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1418574533235,"hash":"15ef249fc889be3f52425239fa19c98445bfaf6e"}